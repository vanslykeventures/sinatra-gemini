<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>UmpBot</title>
    <style>
      :root {
        color-scheme: light;
        --ink: #111111;
        --line: #9c9c9c;
        --soft-line: #c8c8c8;
        --paper: #ffffff;
        --page: #f4f4f4;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        background: var(--page);
        color: var(--ink);
        font-family: "Trebuchet MS", "Lucida Sans Unicode", "Lucida Grande",
          "Lucida Sans", Arial, sans-serif;
      }

      .page {
        min-height: 100vh;
        padding: 28px 24px 40px;
      }

      .card {
        max-width: 560px;
        background: var(--paper);
        border: 2px solid var(--line);
        padding: 28px 34px 40px;
      }

      h1 {
        margin: 0 0 18px;
        font-size: 28px;
        font-weight: 700;
      }

      form {
        display: grid;
        gap: 18px;
      }

      fieldset {
        border: 1px solid var(--line);
        padding: 12px 14px 14px;
        margin: 0;
      }

      legend {
        font-size: 14px;
        padding: 0 6px;
      }

      .field-row {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .field-row > span,
      .field-row > label {
        min-width: 84px;
      }

      .radio-group {
        display: flex;
        flex-wrap: wrap;
        gap: 14px;
      }

      .radio-group label {
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }

      .field-row.stack {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }

      .helper {
        font-size: 12px;
        color: #555555;
      }

      .hidden {
        display: none;
      }

      select {
        border: 1px solid var(--soft-line);
        padding: 4px 6px;
        font-size: 14px;
        background: #fff;
      }

      textarea {
        width: 100%;
        min-height: 140px;
        border: 1px solid var(--soft-line);
        padding: 6px 8px;
        font-size: 14px;
        font-family: inherit;
        resize: vertical;
      }

      button {
        width: fit-content;
        padding: 4px 10px;
        border: 1px solid var(--line);
        background: #f7f7f7;
        cursor: pointer;
      }

      button:hover {
        background: #ededed;
      }

      @media (max-width: 640px) {
        .card {
          padding: 22px 20px 32px;
        }

        .field-row {
          flex-direction: column;
          align-items: flex-start;
        }
      }
    </style>
  </head>
  <body>
    <div class="page">
      <div class="card">
        <h1>UmpBot</h1>
        <form action="/submit" method="post">
          <fieldset>
            <legend>Select the season:</legend>
            <div class="field-row">
              <span>Season: </span>
              <div class="radio-group" id="season">
                <label>
                  <input type="radio" name="season" value="fall" required checked />
                  Fall
                </label>
                <label>
                  <input type="radio" name="season" value="spring" required />
                  Spring
                </label>
              </div>
            </div>
          </fieldset>

          <fieldset>
            <legend>Select the sport:</legend>
            <div class="field-row">
              <span>Sport: </span>
              <div class="radio-group" id="sport">
                <label>
                  <input type="radio" name="sport" value="baseball" required checked />
                  Baseball
                </label>
                <label>
                  <input type="radio" name="sport" value="softball" required />
                  Softball
                </label>
                <label>
                  <input type="radio" name="sport" value="tee ball" required />
                  Tee Ball
                </label>
              </div>
            </div>
          </fieldset>

          <fieldset id="age_range_fieldset" class="hidden">
            <legend>Select the age range:</legend>
            <div class="field-row stack">
              <label for="age_range">Age Range</label>
              <select id="age_range" name="age_range" required>
                <option value="" disabled selected>Select age range</option>
              </select>
              <div class="helper" id="age_help"></div>
            </div>
          </fieldset>

          <fieldset id="teeball_level_fieldset" class="hidden">
            <legend>Select tee ball level:</legend>
            <div class="field-row">
              <label for="teeball_level">Tee Ball</label>
              <select id="teeball_level" name="teeball_level">
                <option value="I">Tee Ball I</option>
                <option value="II">Tee Ball II</option>
              </select>
            </div>
          </fieldset>

          <fieldset>
            <legend>Enter your question:</legend>
            <div class="field-row stack">
              <label for="question">Question</label>
              <textarea
                id="question"
                name="question"
                rows="4"
                required
              ></textarea>
            </div>
          </fieldset>

          <button type="submit">Submit</button>
        </form>
      </div>
    </div>
    <script>
      const ageOptions = {
        fall: {
          baseball: ["U7", "U9", "U11", "U13", "17U"],
          softball: ["U7", "U9", "U11", "U16"],
          "tee ball": [],
        },
        spring: {
          baseball: ["U8", "U10", "U12", "U14", "U18"],
          softball: ["U8", "U10", "U12", "U17"],
          "tee ball": [],
        },
      };

      const seasonGroup = document.getElementById("season");
      const sportGroup = document.getElementById("sport");
      const ageRangeFieldset = document.getElementById("age_range_fieldset");
      const ageSelect = document.getElementById("age_range");
      const ageHelp = document.getElementById("age_help");
      const teeballLevelFieldset = document.getElementById("teeball_level_fieldset");

      const selectedValue = (groupName) => {
        const checked = document.querySelector(`input[name="${groupName}"]:checked`);
        return checked ? checked.value : "";
      };

      const buildAgeOptions = () => {
        const season = selectedValue("season");
        const sport = selectedValue("sport");
        const ages = ageOptions[season]?.[sport] || [];
        const showTeeballLevel = season === "spring" && sport === "tee ball";
        const hasSelection = season && sport;

        ageSelect.innerHTML = "";
        if (!hasSelection) {
          ageRangeFieldset.classList.add("hidden");
          teeballLevelFieldset.classList.add("hidden");
          return;
        }

        if (ages.length === 0) {
          const option = document.createElement("option");
          option.value = "";
          option.textContent = "No age ranges for this selection";
          option.disabled = true;
          option.selected = true;
          ageSelect.append(option);
          ageSelect.disabled = true;
          ageHelp.textContent = "This selection does not have age-specific rules.";
          ageRangeFieldset.classList.toggle("hidden", showTeeballLevel);
          teeballLevelFieldset.classList.toggle("hidden", !showTeeballLevel);
          return;
        }

        const placeholder = document.createElement("option");
        placeholder.value = "";
        placeholder.textContent = "Select age range";
        placeholder.disabled = true;
        placeholder.selected = true;
        ageSelect.append(placeholder);

        ages.forEach((age) => {
          const option = document.createElement("option");
          option.value = age;
          option.textContent = age;
          ageSelect.append(option);
        });

        ageSelect.disabled = false;
        ageHelp.textContent = "";
        ageRangeFieldset.classList.remove("hidden");
        teeballLevelFieldset.classList.add("hidden");
      };

      seasonGroup.addEventListener("change", buildAgeOptions);
      sportGroup.addEventListener("change", buildAgeOptions);
      buildAgeOptions();
    </script>
  </body>
</html>
